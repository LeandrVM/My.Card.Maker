<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card_Maker</title>
    <link rel="stylesheet" type="text/css" href="stylesheet.css" media="screen" />
</head>
<body>
    <button id="teste">teste</button>
    <header>
        <h1>Logo</h1>
    </header>
    <main>
        <div class="preview">
            <div class="ttlpreview">
                <h1>Preview</h1>
            </div>
            <div class="prepreview">
                <div class="numeracao">
                    <div class="numeracao1">    
                        <div>1</div>
                        <div>3</div>
                    </div>
                    <div class="numeracao2">
                        <div>2</div>
                        <div>4</div>
                    </div>
                </div>
                <div class="canpreview" id="a4-preview">
                    <canvas class="a4-sheet" id="myCanvas">
                        <div class="pair01">
                            <div class="paircard">
                                <div class="cancard"><img src="./Imagens/Back.png" style="transform: rotate(-90deg) scale(0.32);"></div>
                                <div class="cancard"><img src="./Imagens/Front00.png" id="canimg1" style="transform: rotate(-90deg) scale(0.32);"></div>
                            </div>
                            <div class="paircard">
                                <div class="cancard"><img src="./Imagens/Back.png" style="transform: rotate(-90deg) scale(0.32);"></div>
                                <div class="cancard"><img src="./Imagens/Front00.png" id="canimg2" style="transform: rotate(-90deg) scale(0.32);"></div>
                            </div>
                        </div>
                        <div class="pair02">
                            <div class="paircard">
                                <div class="cancard"><img src="./Imagens/Back.png" style="transform: rotate(-90deg) scale(0.32);"></div>
                                <div class="cancard"><img src="./Imagens/Front00.png" id="canimg3" style="transform: rotate(-90deg) scale(0.32);"></div>
                            </div>
                            <div class="paircard">
                                <div class="cancard"><img src="./Imagens/Back.png" style="transform: rotate(-90deg) scale(0.32);"></div>
                                <div class="cancard"><img src="./Imagens/Front00.png" id="canimg4" style="transform: rotate(-90deg) scale(0.32);"></div>
                            </div>
                        </div>
                    </canvas>
                </div>
            </div>
        </div>
        <div class="editor">
            <div class="cardseditor">
                <div class="ttlcards">
                    <h2>Front</h2>
                    <h2>Back</h2>
                </div>
                <div class="cards">
                    <div class="card 01">
                        <img id="bg_front" class="imgfront" src="./Imagens/Front00mini.png">
                        <div class="cd">
                            <div class="cdstema" id="">
                                <h1 id="card_tema">Tema</h1>
                            </div>
                            <div class="cdstexto">
                                <h2 id="card_texto">Texto</h2>
                            </div>
                            <div class="cdsowner">
                                <h2 id="card_owner">Owner</h2>
                            </div>
                        </div>
                    </div>
                    <div class="card 02">
                        <img src="./Imagens/Back.png">
                    </div>
                </div>
            </div>
            
            <div class="edit">
                <div class="selectcards">
                    <button class="btnprev" id="btn_prev">Prev</button>
                    <h2 id="Carta_Numero">Carta</h2>
                    <button class="btnnext" id="btn_next">Next</button>
                </div>
                <div class="editop">
                    <div class="op 01">
                        <div class="opit Tema">
                            <h3>Tema</h3>
                            <input id="input_tema" type="text" placeholder="Digite o Tema aqui" maxlength="20">
                        </div>
                        <div class="opit Texto">
                            <h3>Texto</h3>
                            <textarea id="input_texto" type="text" rows="2" cols="20"placeholder="Digite seu Texto aqui"></textarea>
                        </div>
                    </div>
                    <div class="op02">
                        <div class="opit Valor">
                            <h3>Valor</h3>
                            <div class="input_valor_completo">
                                <input id="input_valor" type="range" placeholder="Valor da carta" min="0" max="3" value="0" step="1">
                                <p><span id="input_carta"></span></p>
                            </div>
                        </div>
                        <div class="opit Owner">
                            <h3>Owner</h3>
                            <input id="input_owner" type="text" placeholder="Digite seu nome aqui" maxlength="10">
                        </div>
                    </div>
                </div>
            </div>
            <button id="downloadBtn">Baixar Imagem</button>
        </div>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        const InputTema = document.getElementById('input_tema');
const Tema = document.getElementById('card_tema');

InputTema.addEventListener('input', function() {
    Tema.innerText = InputTema.value || 'Tema';
});

const InputTexto = document.getElementById('input_texto');
const Texto = document.getElementById('card_texto');

InputTexto.addEventListener('input', function() {
    Texto.innerText = InputTexto.value || 'Texto';
});

const InputOwner = document.getElementById('input_owner');
const Owner = document.getElementById('card_owner');

InputOwner.addEventListener('input', function() {
    Owner.innerText = InputOwner.value ? `by- ${InputOwner.value}` : 'Owner';
});

const range = document.getElementById('input_valor');
const valor = document.getElementById('input_carta');
const bgfront = document.getElementById('bg_front');
const bgfront1 = document.getElementById('canimg1');
const bgfront2 = document.getElementById('canimg2');
const bgfront3 = document.getElementById('canimg3');
const bgfront4 = document.getElementById('canimg4');


 

// Atualiza o valor exibido em tempo real
range.addEventListener('input', function() {
    valor.innerText = range.value;
    ValData[CartaAtual] = valor.innerText
    bgfront.src = `./Imagens/Front0${valor.innerText}mini.png`;
    bgfront1.src =  `./Imagens/Front0${ValData[1] || 0}.png`;
    bgfront2.src =  `./Imagens/Front0${ValData[2] || 0}.png`;
    bgfront3.src =  `./Imagens/Front0${ValData[3] || 0}.png`;
    bgfront4.src =  `./Imagens/Front0${ValData[4] || 0}.png`;


});

// Exibe o valor inicial
valor.innerText = range.value;

let CartaAtual = 1;
const MaxCarta = 4;
const btn_next = document.getElementById('btn_next');
const btn_prev = document.getElementById('btn_prev');


// Inicialização dos dados das cartas
let TemData = {
    1: '',
    2: '',
    3: '',
    4: ''
};

let TexData = {
    1: '',
    2: '',
    3: '',
    4: ''
};

let ValData = {
    1: '',
    2: '',
    3: '',
    4: ''
};

let OwnData = {
    1: '',
    2: '',
    3: '',
    4: ''
};

// Função para atualizar o conteúdo da carta e o preview
function updateCard() {
    // Atualiza os inputs
    document.getElementById("Carta_Numero").innerText = `Carta_${CartaAtual}`;
    document.getElementById('input_tema').value = TemData[CartaAtual];
    document.getElementById('input_texto').value = TexData[CartaAtual];
    document.getElementById('input_owner').value = OwnData[CartaAtual];
    document.getElementById('input_valor').value = ValData[CartaAtual];
    
    // Atualiza o preview
    Tema.innerText = TemData[CartaAtual] || 'Tema';
    Texto.innerText = TexData[CartaAtual] || 'Texto';
    Owner.innerText = OwnData[CartaAtual] ? `by- ${OwnData[CartaAtual]}` : 'Owner';
    valor.innerText = ValData[CartaAtual] || 0;
    bgfront.src = `./Imagens/Front0${ValData[CartaAtual] || 0}mini.png`;
    bgfront1.src =  `./Imagens/Front0${ValData[1] || 0}.png`; 
    bgfront2.src =  `./Imagens/Front0${ValData[2] || 0}.png`; 
    bgfront3.src =  `./Imagens/Front0${ValData[3] || 0}.png`;
    bgfront4.src =  `./Imagens/Front0${ValData[4] || 0}.png`;
    
    // Habilitar/desabilitar botões
    document.getElementById("btn_prev").disabled = CartaAtual === 1;
    document.getElementById("btn_next").disabled = CartaAtual === MaxCarta;
}

// Função para avançar para a próxima carta
function nextCard() {
    if (CartaAtual < MaxCarta) {
        // Salva os valores atuais antes de mudar de carta
        TemData[CartaAtual] = document.getElementById('input_tema').value;
        TexData[CartaAtual] = document.getElementById('input_texto').value;
        OwnData[CartaAtual] = document.getElementById('input_owner').value;
        ValData[CartaAtual] = document.getElementById('input_valor').value;
        
        CartaAtual++;
        updateCard();
    }
}

// Função para voltar para a carta anterior
function previousCard() {
    if (CartaAtual > 1) {
        // Salva os valores atuais antes de mudar de carta
        TemData[CartaAtual] = document.getElementById('input_tema').value;
        TexData[CartaAtual] = document.getElementById('input_texto').value;
        OwnData[CartaAtual] = document.getElementById('input_owner').value;
        ValData[CartaAtual] = document.getElementById('input_valor').value;
        
        CartaAtual--;
        updateCard();
    }
}

// Adiciona eventos aos botões de navegação
btn_next.addEventListener("click", nextCard);
btn_prev.addEventListener("click", previousCard);

        function downloadA4() {
            const a4 = document.getElementById('a4');
            html2canvas(a4, { scale: 2 }).then(function (canvas) {
                let link = document.createElement('a');
                link.download = 'cartas_a4.png';
                link.href = canvas.toDataURL('image/png'); // Garante que o formato seja PNG
                link.click();
            });
        };

// Atualiza o valor exibido em tempo real

document.getElementById('downloadBtn').addEventListener('click', downloadA4)
// Inicializa a primeira carta
updateCard();


</script>
</body>
</html>